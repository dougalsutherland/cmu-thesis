% for a more compact document, add the option openany to avoid
% starting all chapters on odd numbered pages
\documentclass[12pt]{cmuthesis}

% This is a document with a long history.
% David Koes's version is available at github.com/robsimmons/cmu-thesis
%
% It was later modified a bit by Dougal Sutherland, mainly to use modern
% packages like biblatex and cleveref: github.com/dougalsutherland/cmu-thesis
% I also probably broke some stuff, though.

% This is a template for a CMU thesis.  It is 18 pages without any content :-)
% The source for this is pulled from a variety of sources and people.
% Here's a partial list of people who may or may have not contributed:
%
%        bnoble   = Brian Noble
%        caruana  = Rich Caruana
%        colohan  = Chris Colohan
%        jab      = Justin Boyan
%        josullvn = Joseph O'Sullivan
%        jrs      = Jonathan Shewchuk
%        kosak    = Corey Kosak
%        mjz      = Matt Zekauskas (mattz@cs)
%        pdinda   = Peter Dinda
%        pfr      = Patrick Riley
%        dkoes    = David Koes
%        dougal   = Dougal Sutherland

\RequirePackage{etex}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

\usepackage{amsmath,amssymb,amsthm}
\usepackage{newtxtext,newtxmath}

\usepackage{titlesec}
\titleformat{\chapter}[display]{\LARGE\bfseries}{\chaptertitlename\ \thechapter}{20pt}{\Huge\bfseries}

% Approximately 1" margins, more space on binding side
%\usepackage[letterpaper,twoside,vscale=.8,hscale=.75,nomarginpar]{geometry}
%for general printing (not binding)
\usepackage[letterpaper,twoside,vscale=.8,hscale=.75,nomarginpar,hmarginratio=1:1]{geometry}

\usepackage{graphicx}

\usepackage{bbm}

\usepackage{caption}
\usepackage{subcaption}

\usepackage{enumitem}

\usepackage[disable]{todonotes}
\setlength{\marginparwidth}{.95in}

\usepackage{tikz}
\usetikzlibrary{calc,intersections}

\usepackage{pgfplots}
\pgfplotsset{compat=1.12}

\usepackage{color}
\usepackage{url}

\usepackage{placeins}

\usepackage{xspace}

\usepackage[backend=biber,isbn=false,maxcitenames=2,maxbibnames=7,minbibnames=3,backref=true,abbreviate=false,style=authoryear,citestyle=authoryear-comp,sortcites,sorting=ynt]{biblatex}
\addbibresource{refs.bib}
\DefineBibliographyStrings{english}{%
    backrefpage={page},% instead of "cited on page"
    backrefpages={pages},% instead of "cited on pages"
}

\usepackage[colorlinks=true,hypertexnames=true,bookmarksnumbered=true,plainpages=false]{hyperref}
% TODO: autonum says you need hypertexnames=false
% but we need that for page links (e.g. backref in biblatex) to work
% (http://tex.stackexchange.com/a/58962/9019)
% This makes some equation links wrong, but they still go to the right page.

\usepackage[noabbrev,capitalize]{cleveref}

\usepackage{autonum}

% Provides a draft mark at the top of the document. 
% \draftstamp{\today}{DRAFT}

% This is a reasonable place to define math shortcuts and so on.
\newcommand{\acro}[1]{\textsc{\MakeLowercase{#1}}}
\newcommand{\tp}{^\mathsf{T}}

\newcommand{\R}{\mathbb{R}}
\newcommand{\eps}{\varepsilon}

% Here are some macros for absolute value / norm / ceil / floor:
% use e.g. \abs*{\sum_{i=1}^n x_i} to make the abs bars automatically big.
\makeatletter
\newcommand\given{%
 \@ifstar
  {\mathrel{}\middle|\mathrel{}}
  {\mid}%
}
\DeclareRobustCommand{\abs}{\@ifstar\@abs\@@abs}
\newcommand{\@abs}[1]{\left\lvert #1 \right\rvert}
\newcommand{\@@abs}[1]{\lvert #1 \rvert}

\DeclareRobustCommand{\norm}{\@ifstar\@norm\@@norm}
\newcommand{\@norm}[1]{\left\lVert #1 \right\rVert}
\newcommand{\@@norm}[1]{\lVert #1 \rVert}

\DeclareRobustCommand{\ceil}{\@ifstar\@ceil\@@ceil}
\newcommand{\@ceil}[1]{\left\lceil #1 \right\rceil}
\newcommand{\@@ceil}[1]{\lceil #1 \rceil}

\DeclareRobustCommand{\floor}{\@ifstar\@floor\@@floor}
\newcommand{\@floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\@@floor}[1]{\lfloor #1 \rfloor}
\makeatother

\DeclareMathOperator*{\argmax}{argmax}
\DeclareMathOperator*{\argmin}{argmin}

\newtheorem{proposition}{Proposition}[chapter]
\newtheorem{corollary}[proposition]{Corollary}
\newtheorem{defn}[proposition]{Definition}
\newtheorem*{theorem*}{Theorem}

\newcommand{\httpurl}[1]{\href{http://#1}{\nolinkurl{#1}}}
\newcommand{\httpsurl}[1]{\href{https://#1}{\nolinkurl{#1}}}

% This will let you compile only one (or a few) chapters at a time, for speed,
% while keeping cross-references and so on working based on the last time you
% compiled them.
% vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
% \includeonly{intro}  % <--------------------------------------------
% ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
\begin{document} 
\frontmatter

%initialize page style, so contents come out right (see bot) -mjz
\pagestyle{empty}

\title{%% {\Large Thesis Proposal:}\\
       \textbf{Awesome Work in Computer Science}}
\author{Me}
\date{Neverember 3006}
\Year{3006}
\trnumber{}

\committee{
My Advisor, Chair \\
Someone Else \\
Another Person \\
One More, Some Mysterious University
}

\support{% This research was sponsored by my dog.
}
\disclaimer{%The views and conclusions contained in this document are those of the author and should not be taken as anything other than a not very funny joke.
}

% copyright notice generated automatically from Year and author.
% permission added if \permission{} given.

\keywords{computer science, computational archaeolinguistics, operational semantics of Chevy Tahoes}

\maketitle

\begin{dedication}
To my stuffed cow.
\end{dedication}

\begin{abstract}
    \input{abstract}
\end{abstract}

% You can use this if you don't have many people to thank:
%
% \begin{acknowledgments}
% \vspace*{\stretch{1}} 
% \input{acknowledgments}
% \vspace*{\stretch{3}}
% \end{acknowledgments}
%
% If you do, this is fine instead:
\cleardoublepage
\begin{center} \large {\bf Acknowledgements} \end{center}
\input{acknowledgements}
% \end{acknowledgments}

\cleardoublepage
\pagestyle{plain} % for toc, was empty
\setcounter{page}{1}
\tableofcontents
% \listoffigures
% \listoftables

\mainmatter

\include{intro}
% add some more includes here for your actual content chapters
\include{conclusion}

\appendix
% do some includes here if you want, in the same format as the others

\backmatter
\newrefcontext[sorting=nyt]
\renewcommand{\bibfont}{\normalfont\small}
\printbibliography[heading=bibintoc]
\endrefcontext

\end{document}
